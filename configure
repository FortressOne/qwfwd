#!/bin/sh

# OS determination
if [ x$1 != x ]; then
UNAME=$1
else
UNAME=`uname`
fi

case ${UNAME} in
FreeBSD | OpenBSD | NetBSD | DragonFly | BSD)
	cat Makefile.GNU > Makefile
	echo "${UNAME} system detected, Makefile created."
	echo "Compiling with gmake is mandatory. If you do not want to compile qwfwd now,"
	echo "you can choose to do it later. However using other than default target still"
	echo "requires the usage of gmake under FreeBSD. Here is an example how to do that:"
	echo "gmake qwfwd-dl"
	read -p "Compile default target now? (y/n) " REPLY
	if [ "$REPLY" = "y" ]; then
		gmake
	else
		exit 1
	fi
	;;
Darwin | MacOSX | Linux | SunOS | GNU)
	cat Makefile.GNU > Makefile
	echo "${UNAME} system detected, Makefile created."
	echo "If you do not want to compile qwfwd now, or you want to compile other than"
	echo "default target, you can choose no. Here is an example how to do that:"
	echo "make qwfwd-dl"
	read -p "Compile default target now? (y/n) " REPLY
	if [ "$REPLY" = "y" ]; then
		make
	else
		exit 1
	fi
	;;
*)
	echo "ERROR: Unknown system: ${UNAME}."
	exit 1
	;;
esac
