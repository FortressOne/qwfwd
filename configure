#!/bin/sh

# OS determination
if [ x$1 != x ]; then
UNAME=$1
else
UNAME=`uname`
fi

case ${UNAME} in
FreeBSD | OpenBSD | NetBSD | DragonFly | BSD)
	echo "${UNAME} system detected."
	cat Makefile.GNU > Makefile
	read -p "Compile with gmake is highly recommended, do it now? (y/n) " REPLY
	if [ "$REPLY" = "y" ]; then
		gmake
	else
		exit 1
	fi
	;;
Darwin | MacOSX | Linux | SunOS | GNU)
	echo "${UNAME} system detected."
	cat Makefile.GNU > Makefile
	read -p "Compile using make? (y/n) " REPLY
	if [ "$REPLY" = "y" ]; then
		make
	else
		exit 1
	fi
	;;
*)
	echo "ERROR: Unknown system: ${UNAME}."
	exit 1
	;;
esac
